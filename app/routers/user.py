

from fastapi import APIRouter, Depends
from sqlalchemy.ext.asyncio import AsyncSession
from app.schemas.user import UserCreate, UserResponse
from app.services.user import UserServices
from app.db.database import get_db

router = APIRouter()

@router.post("/signup/", response_model=UserResponse)
async def create_user(
    user: UserCreate,
    db: AsyncSession = Depends(get_db)
):
    user_service = UserServices(db)
    return await user_service.create(user)





{"printer":"Canon LBP6030/6040/6018L","pageSize":"A5","reportPageSize":"A5","topMargin":"65.35208332852326mm","A4TopMargin":"72.72204085450569mm","bMarginDrug":"0","nutrition":0,"gynecological":1,"reportOnStart":1,"fontSize":"16","printingMethod":"3","landscape":0,"bert":0,"rightMargin":"5","leftMargin":"5","scanType":0,"opthalmology":0,"bmiTracker":1,"savedPrice":"","egfrTracker":0,"durationBetweenAppointments":"00:15:00","runTime":162,"maleFemalePercentage":1,"aiNextWordPrediction":1,"returnDatePrint":0,"patientIdRx":0,"tomorrowPatients":0,"visitSummary":0,"showCCNote":1,"imageCompression":1,"nameAgeDatePrint":1,"weightHeightPrint":0,"radiology":0,"modernVisitsSummary":0,"showCCTimeline":0,"patientColumns":{"job":{"name":"Job","state":0},"province":{"name":"Province","state":0},"address":{"name":"Address","state":0},"phone_number":{"name":"Phone No.","state":0},"referral":{"name":"Referral","state":0},"weight":{"name":"Weight","state":0},"height":{"name":"Height","state":0},"bmi":{"name":"BMI","state":0},"marital_status":{"name":"Marital Status","state":0},"return_visit":{"name":"Date of Return","state":0},"visits_number":{"name":"Total Visits","state":0},"last_visit":{"name":"Last Visit","state":0},"past_medical":{"name":"History","state":0},"past_surgery":{"name":"Surgical History","state":0},"view_tags":{"name":"Tags","state":0}},"bpTracker":1,"doseTradeDrug":1,"typeTradeDrug":1,"timesTradeDrug":1,"durationTradeDrug":1,"doseScientificDrug":1,"typeScientificDrug":1,"timesScientificDrug":1,"durationScientificDrug":1,"previousVisits":0,"ophthalmologyRx":1,"icd10Surgeries":0,"icd10Diseases":0,"extendScientificDrugs":1,"beta":0,"sections":["SideBarSection","MainSections","ProfileSideSections"],"profile":[{"component":"OverViewSection"},{"component":"DentistSection"},{"component":"Custom Fields Section","id":"ubnthe123","created":true,"fields":[]},{"component":"SystemReviewSection"},{"component":"ExaminationSection"},{"component":"LabSection"},{"component":"PastHxSection"},{"component":"OphthalmologySection"},{"component":"PrescriptionSection"}],"addedOphthalmologyEx":["External","Posterior segment","Orbits","Eyelids","Ocular alig. & motility","Pupils","Lacrimal apparatus","Eyelashes & lid margin","Conjunctiva","Sclera","Tear film","Cornea","Anterior chamber","Iris & pupil lens","Lens","Anterior vitreous","Vitreous","Optic disc","Macula & fovea","Retinal vasculature","Peripheral retina"],"deletedOphthalmologyEx":[],"relatedInExamination":1,"git":0,"patientCharts":0,"switchValue":0,"showProcedures":0,"showPrescriptionPlan":0,"showMedicalInstructions":0,"showDifferentialDiagnoses":0,"showComplaints":1,"Historyofpresentillness":1,"showTags":0,"showPatientComplaints":1,"nutritionalInfo":{"body_age":1,"calories":1,"metabolism":1,"organic_fats":1,"epigastric_radius":1,"thigh_radius":1,"fats_percentage":1,"pelvic_radius":1,"muscles_percentage":1,"hypogastric_radius":1,"umbilical_radius":1},"gynecologicalSetting":{"lmp":1,"last_ultrasound":1,"gravidity":1,"edd":1,"parity":1,"gestational_age":1,"abortion":1,"abortion_note":1,"last_ultrasound_note":1},"showReport":1,"showCustomFields":1,"showSystemReview":0,"settingsRos":{},"showExaminationNote":1,"showPositiveSigns":1,"showRelativeNegatives":1,"showTradeDrugs":1,"showPresavedDrugs":1,"showPrescriptionNote":0,"showDiagnoses":1,"showDrugs":1,"showPMH":1,"showPSH":1,"showPFH":1,"showAllergies":1,"showSocialHistory":1,"showInvestigation":1,"showImaging":1,"showHx":1,"showOpticalHistory":1,"showGlasses":1,"showOH":1,"showFOH":1,"showOSH":1,"showContactLens":1,"showOculusDextrus":1,"VAOculusDextrus":{"Autorefraction":1,"IOP":1,"Kreading":1,"GeneralAstigmatism":1,"OldGlasses":1,"Manifestrefraction":1,"Cycloplegicrefraction":1},"showOculusSinister":1,"VAOculusSinister":{"Autorefraction":1,"IOP":1,"Kreading":1,"GeneralAstigmatism":1,"OldGlasses":1,"Manifestrefraction":1,"Cycloplegicrefraction":1},"showVA":1,"settingsRX":{"Sphere":1,"Cylinder":1,"Axis":1,"IPD":1},"showRX":1,"showEX":1,"settingsEX":{"External":1,"Posteriorsegment":1,"Orbits":1,"Ocularaligmotility":1,"Pupils":1,"Eyelids":1,"Lacrimalapparatus":1,"Eyelasheslidmargin":1,"Conjunctiva":1,"Sclera":1,"Tearfilm":1,"Cornea":1,"Anteriorchamber":1,"Irispupillens":1,"Lens":1,"Anteriorvitreous":1,"Vitreous":1,"Opticdisc":1,"Maculafovea":1,"Retinalvasculature":1,"Peripheralretina":1},"overview":1,"pastHX":0,"prescription":1,"examination":0,"showLabs":1,"RxInvoice":{"headerDisplay":{"Header":"show","DektorInvoice":"show","DektorName":"show","DektorName2":"show","DektorSpecialist":"show","DektorSpecialist2":"show","DektorInfo":"show","DektorDate":"show"},"clientInfo":{"ClientInfoName":"show","ClientInfoAge":"show","ClientInfoAddress":"show","ClientInfoDate":"show","ClientInfoPMH":"show","ClientInfoReternTo":"show","ClientInfoBorder":"show"},"bodySettings":{"ForCt":"show","Compliant":"show","Diagnosis":"show","Summary":"show","Treatment":"show","Note":"show"},"footerSettings":{"Footer":"show","Phone":"show","Address":"show","Border":"show"}},"HeaderInvoice":{"invoiceHeaderDektorInvoice":{"title":"الوصفة","color":"black","bgColor":"yellow","fontSize":"30px","fontWeight":700,"border":0,"underline":"none","italic":"normal"},"invoiceHeaderDektorName":{"title":"اسم الدكتور ","color":"black","bgColor":"#ffffff00","fontSize":20,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"invoiceHeaderDektorLogo":{"width":"72px","hegith":"80px","border":0,"borderStyle":"solid","color":"#ffffff00","opacity":"49%","borderRadius":"50%"},"invoiceHeaderDektorName2":{"title":"Doktor Name","color":"black","bgColor":"#ffffff00","fontSize":20,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"invoiceHeaderDektorSpecialist":{"title":"----","color":"black","bgColor":"#ffffff00","fontSize":"14px","fontWeight":500,"border":0,"underline":"none","italic":"normal"},"invoiceHeaderDektorSpecialist2":{"title":"---","color":"black","bgColor":"#ffffff00","fontSize":"14px","fontWeight":500,"border":0,"underline":"none","italic":"normal"},"invoiceHeaderDektorInfo":{"title":"---","color":"black","bgColor":"#ffffff00","fontSize":20,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"invoiceHeaderDektorDate":{"title":"2023-05-11","color":"black","bgColor":"#ffffff00","fontSize":20,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"positionTitle":{"x":0,"y":0},"positionName":{"x":0,"y":0},"positionName2":{"x":0,"y":0},"positionSpecialist":{"x":0,"y":0},"positionSpecialist2":{"x":0,"y":0},"positionInfo":{"x":0,"y":0},"positionDate":{"x":0,"y":0}},"DetailsClientInvoice":{"detailsClientInfoName":{"color":"black","bgColor":"#ffffff00","fontSize":14,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"detailsClientInfoAge":{"color":"black","bgColor":"#ffffff00","fontSize":14,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"detailsClientInfoAddress":{"color":"black","bgColor":"#ffffff00","fontSize":14,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"detailsClientInfoDate":{"color":"black","bgColor":"#ffffff00","fontSize":14,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"detailsClientInfoPMH":{"color":"black","bgColor":"#ffffff00","fontSize":14,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"detailsClientInfoReternTo":{"color":"black","bgColor":"#ffffff00","fontSize":14,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"positionName":{"x":0,"y":0},"positionAge":{"x":0,"y":0},"positionAddress":{"x":0,"y":0},"positionDate":{"x":0,"y":0},"positionPMH":{"x":0,"y":0},"positionReternTo":{"x":0,"y":0}},"DetailsBodyInvoice":{"detailsBodyInvoiceForCt":{"coloe":"black","bgColor":"#ffffff00","fontSize":18,"fontWeight":700,"border":0,"underline":"none","italic":"normal"},"detailsBodyInvoiceChiefCompliant":{"coloe":"red","bgColor":"#ffffff00","fontSize":14,"fontWeight":700,"border":0,"underline":"none","italic":"normal"},"detailsBodyInvoiceDiagnosis":{"coloe":"red","bgColor":"#ffffff00","fontSize":14,"fontWeight":700,"border":0,"underline":"none","italic":"normal"},"detailsBodyInvoiceSummary":{"coloe":"red","bgColor":"#ffffff00","fontSize":14,"fontWeight":700,"border":0,"underline":"none","italic":"normal"},"detailsBodyInvoiceTreatmentLabel":{"coloe":"red","bgColor":"#ffffff00","fontSize":"20px","fontWeight":700,"border":0,"underline":"none","italic":"normal"},"detailsBodyInvoiceTreatmentLabelItem":{"coloe":"black","bgColor":"#ffffff00","fontSize":16,"fontWeight":700,"border":0,"underline":"none","italic":"normal"},"detailsBodyInvoiceNoteLabel":{"coloe":"black","bgColor":"#ffffff00","fontSize":20,"fontWeight":700,"border":0,"underline":"none","italic":"normal"},"detailsBodyInvoiceNoteInput":{"coloe":"black","bgColor":"#ffffff00","fontSize":16,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"positionForCt":{"x":0,"y":0},"positionChiefCompliant":{"x":0,"y":0},"positionDiagnosis":{"x":0,"y":0},"positionInvoiceSummary":{"x":0,"y":0},"positionTreatmentLabel":{"x":0,"y":0},"positionNoteLabel":{"x":0,"y":0}},"DetailsFooter":{"detailsFooterInvoicePhone":{"title":"0781000001","coloe":"black","bgColor":"#ffffff00","fontSize":14,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"detailsFooterInvoiceAddress":{"title":"بغداد / الكرادة","coloe":"black","bgColor":"#ffffff00","fontSize":14,"fontWeight":500,"border":0,"underline":"none","italic":"normal"},"positionPhone":{"x":0,"y":0},"positionAddress":{"x":0,"y":0}},"BgImage":" ","firstTimeNewVisit":0,"showCollectionInvs":0,"showDob":0,"patientPanelNewVisitSize":"20","showDentist":0,"selectedGeneralPatientInfoFields":[{"name":"age","label":"Age"},{"name":"blood_group","label":"Blood Group"},{"name":"height","label":"Height"},{"name":"phone_number","label":"Phone Number"},{"name":"marital_status__name","label":"Marital Status"},{"name":"job","label":"Job"},{"name":"note","label":"Note"}],"bsaTracker":1,"showVerticalVa":0,"endMarginTop":767,"A4EndMarginTop":1108,"chromeExcutablePath":"","headerConfiguration":{"layout":"default","leftColumnItems":["name","age"],"rightColumnItems":["date","weight","height","referral"],"headerLanguage":"en","titleFontSize":25,"captionFontSize":null,"valueFontSize":null,"referralFontSize":null,"titleFontWeight":"bold","captionFontWeight":"bold","valueFontWeight":"bold","referralFontWeight":"bold","nameStyle":{},"ageStyle":{},"dateStyle":{},"weightStyle":{},"heightStyle":{},"referralStyle":{},"showName":1,"showAge":1,"showDate":1,"showWeight":1,"showHeight":1,"showReferral":1,"sectionMargin":null,"headerLeftPadding":0,"headerRightPadding":0,"itemSpacing":5},"medicalInstructionTitleSize":"20px","medicalInstructionTitleWeight":"bold","medicalInstructionTitleColor":"#333333","medicalInstructionTitleAlignment":"center","medicalInstructionTitleMargin":"15px","showMedicalInstructionTitle":true,"medicalInstructionLayout":"default","medicalInstructionHeaderLanguage":"en","medicalInstructionHeaderLeftPadding":0,"medicalInstructionHeaderRightPadding":0,"medicalInstructionDiagnosisFontSize":14,"medicalInstructionDiagnosisWeight":"normal","medicalInstructionDiagnosisPaddingLeft":0,"medicalInstructionDiagnosisPaddingRight":0,"medicalInstructionDiagnosisPaddingTop":0,"medicalInstructionDiagnosisPaddingBottom":0,"medicalInstructionMedicationFontSize":14,"medicalInstructionMedicationWeight":"normal","medicalInstructionMedicationPaddingLeft":0,"medicalInstructionMedicationPaddingRight":0,"medicalInstructionMedicationPaddingTop":0,"medicalInstructionMedicationPaddingBottom":0,"ophthalmologyRxFontSize":14,"ophthalmologyRxWeight":"normal","ophthalmologyRxPaddingLeft":0,"ophthalmologyRxPaddingRight":0,"ophthalmologyRxPaddingTop":0,"ophthalmologyRxPaddingBottom":0}